import{An as e,En as t,On as n,Rn as r,Yn as i,ar as a,cn as o,cr as s,dn as c,fn as l,hn as u,kn as d,ln as f,on as p,or as m,pn as h,rn as g,rr as _,sn as v,sr as y,un as b,wn as x,xn as S}from"./game-logic-BBFCPVtv.js";import"./vendor-pinia-uBwenZRB.js";import{o as C}from"./vendor-vue-router-0mfLVB6Y.js";import"./vendor-crypto-CQM8pryk.js";import"./game-i18n-BC9uiVvf.js";import{l as w}from"./vendor-others-Bce0hM6h.js";import{$ as T,D as E,E as D,O,T as k,et as A,k as j}from"./vendor-reka-ui-DR3m_AkV.js";import"./vendor-utils-BlvnUqQX.js";import"./vendor-vueuse-Djj-oRw9.js";import{B as M,I as ee,J as N,L as P,Y as te,c as ne,l as re}from"./vendor-icons-Ccm2_GPI.js";import{t as ie}from"./CardDescription-DW7G2kN2.js";import{g as F,p as I}from"./game-config-DRP-gbpS.js";import{$ as ae,J as L,K as R,X as oe,Y as z,Z as se,d as ce,f as le,m as ue,p as de,q as B,s as fe}from"./index-BFy_PY62.js";import{i as pe,n as me,r as V,t as H}from"./TabsTrigger-CSmJKCZO.js";var U=h({__name:`Pagination`,props:{page:{},defaultPage:{},itemsPerPage:{},total:{},siblingCount:{},disabled:{type:Boolean},showEdges:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:[`update:page`],setup(e,{emit:n}){let i=e,a=n,s=T(w(i,`class`),a);return(e,n)=>(t(),o(_(j),S({"data-slot":`pagination`},_(s),{class:_(z)(`mx-auto flex w-full justify-center`,i.class)}),{default:r(t=>[d(e.$slots,`default`,m(u(t)))]),_:3},16,[`class`]))}}),W=h({__name:`PaginationContent`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let n=e,i=w(n,`class`);return(e,a)=>(t(),o(_(O),S({"data-slot":`pagination-content`},_(i),{class:_(z)(`flex flex-row items-center gap-1`,n.class)}),{default:r(t=>[d(e.$slots,`default`,m(u(t)))]),_:3},16,[`class`]))}}),G=h({__name:`PaginationItem`,props:{value:{},asChild:{type:Boolean},as:{},size:{default:`icon`},class:{},isActive:{type:Boolean}},setup(e){let n=e,i=w(n,`class`,`size`,`isActive`);return(a,s)=>(t(),o(_(E),S({"data-slot":`pagination-item`},_(i),{class:_(z)(_(B)({variant:e.isActive?`outline`:`ghost`,size:e.size}),n.class)}),{default:r(()=>[d(a.$slots,`default`)]),_:3},16,[`class`]))}}),K=h({__name:`PaginationNext`,props:{asChild:{type:Boolean},as:{},size:{default:`default`},class:{}},setup(e){let n=e,i=A(w(n,`class`,`size`));return(a,s)=>(t(),o(_(D),S({"data-slot":`pagination-next`,class:_(z)(_(B)({variant:`ghost`,size:e.size}),`gap-1 px-2.5 sm:pr-2.5`,n.class)},_(i)),{default:r(()=>[d(a.$slots,`default`,{},()=>[s[0]||=v(`span`,{class:`hidden sm:block`},`Next`,-1),l(_(N))])]),_:3},16,[`class`]))}}),q=h({__name:`PaginationPrevious`,props:{asChild:{type:Boolean},as:{},size:{default:`default`},class:{}},setup(e){let n=e,i=A(w(n,`class`,`size`));return(a,s)=>(t(),o(_(k),S({"data-slot":`pagination-previous`,class:_(z)(_(B)({variant:`ghost`,size:e.size}),`gap-1 px-2.5 sm:pr-2.5`,n.class)},_(i)),{default:r(()=>[d(a.$slots,`default`,{},()=>[l(_(te)),s[0]||=v(`span`,{class:`hidden sm:block`},`Previous`,-1)])]),_:3},16,[`class`]))}}),J={class:`flex items-start justify-between`},Y={class:`flex-1`},he={key:0,class:`ml-2`},ge={class:`space-y-2`},_e={class:`flex items-center justify-between text-sm`},ve={class:`text-muted-foreground`},X={class:`relative`},ye={class:`h-2 bg-muted rounded-full overflow-hidden`},Z={key:0,class:`pt-2 border-t`},be={class:`text-sm text-muted-foreground mb-2`},xe={class:`flex flex-wrap gap-1`},Se={class:`flex gap-2 pt-2`},Ce={key:1,class:`pt-2 border-t`},we={class:`text-xs text-muted-foreground mb-1`},Te={class:`flex items-center gap-2 text-xs`},Ee={class:`text-muted-foreground`},Q=h({__name:`NpcRelationCard`,props:{npc:{},relation:{}},setup(i){let u=i,d=C(),m=se(),{t:h}=oe(),x=p(()=>u.relation?.reputation||0),S=p(()=>u.relation?.status||F.Neutral),w=p(()=>{switch(S.value){case F.Friendly:return h(`diplomacy.status.friendly`);case F.Hostile:return h(`diplomacy.status.hostile`);default:return h(`diplomacy.status.neutral`)}}),T=p(()=>{switch(S.value){case F.Friendly:return`default`;case F.Hostile:return`destructive`;default:return`secondary`}}),E=p(()=>x.value>=20?`text-green-600 dark:text-green-400`:x.value<=-20?`text-red-600 dark:text-red-400`:`text-muted-foreground`),D=p(()=>!u.relation?.history||u.relation.history.length===0?null:u.relation.history[u.relation.history.length-1]),O=e=>m.npcs.find(t=>t.id===e)?.name||e.substring(0,8),k=e=>{switch(e){case I.GiftResources:return P;case I.Attack:case I.AllyAttacked:return re;case I.Spy:return M;case I.StealDebris:return ne;default:return P}},A=e=>{switch(e){case I.GiftResources:return h(`diplomacy.events.gift`);case I.Attack:return h(`diplomacy.events.attack`);case I.AllyAttacked:return h(`diplomacy.events.allyAttacked`);case I.Spy:return h(`diplomacy.events.spy`);case I.StealDebris:return h(`diplomacy.events.stealDebris`);default:return e}},j=()=>{if(u.npc.planets.length>0){let e=u.npc.planets[0];if(!e)return;d.push({path:`/fleet`,query:{galaxy:e.position.galaxy,system:e.position.system,position:e.position.position,gift:`1`}})}},N=()=>{if(u.npc.planets.length>0){let e=u.npc.planets[0];if(!e)return;d.push({path:`/galaxy`,query:{galaxy:e.position.galaxy,system:e.position.system,highlightNpc:u.npc.id}})}};return(u,d)=>(t(),o(_(ue),null,{default:r(()=>[l(_(le),null,{default:r(()=>[v(`div`,J,[v(`div`,Y,[l(_(ce),{class:`flex items-center gap-2`},{default:r(()=>[c(s(i.npc.name)+` `,1),l(_(R),{variant:T.value},{default:r(()=>[c(s(w.value),1)]),_:1},8,[`variant`])]),_:1}),l(_(ie),{class:`mt-1`},{default:r(()=>[c(s(i.npc.planets.length)+` `+s(_(h)(`diplomacy.planets`))+` `,1),i.npc.allies&&i.npc.allies.length>0?(t(),b(`span`,he,`Â· `+s(i.npc.allies.length)+` `+s(_(h)(`diplomacy.allies`)),1)):f(``,!0)]),_:1})])])]),_:1}),l(_(de),{class:`space-y-4`},{default:r(()=>[v(`div`,ge,[v(`div`,_e,[v(`span`,ve,s(_(h)(`diplomacy.reputation`)),1),v(`span`,{class:a([`font-semibold`,E.value])},s(x.value>0?`+`:``)+s(x.value),3)]),v(`div`,X,[v(`div`,ye,[x.value<0?(t(),b(`div`,{key:0,class:`h-full bg-red-500 dark:bg-red-600 absolute right-1/2`,style:y({width:`${Math.abs(x.value)/2}%`})},null,4)):f(``,!0),x.value>0?(t(),b(`div`,{key:1,class:`h-full bg-green-500 dark:bg-green-600 absolute left-1/2`,style:y({width:`${x.value/2}%`})},null,4)):f(``,!0)]),d[0]||=v(`div`,{class:`absolute left-1/2 top-0 bottom-0 w-px bg-border`},null,-1)]),d[1]||=v(`div`,{class:`flex justify-between text-xs text-muted-foreground`},[v(`span`,null,`-100`),v(`span`,null,`0`),v(`span`,null,`+100`)],-1)]),i.npc.allies&&i.npc.allies.length>0?(t(),b(`div`,Z,[v(`p`,be,s(_(h)(`diplomacy.alliedWith`))+`:`,1),v(`div`,xe,[(t(!0),b(g,null,n(i.npc.allies.slice(0,3),e=>(t(),o(_(R),{key:e,variant:`outline`,class:`text-xs`},{default:r(()=>[c(s(O(e)),1)]),_:2},1024))),128)),i.npc.allies.length>3?(t(),o(_(R),{key:0,variant:`outline`,class:`text-xs`},{default:r(()=>[c(` +`+s(i.npc.allies.length-3)+` `+s(_(h)(`diplomacy.more`)),1)]),_:1})):f(``,!0)])])):f(``,!0),v(`div`,Se,[l(_(L),{size:`sm`,variant:`outline`,class:`flex-1`,onClick:j},{default:r(()=>[l(_(P),{class:`h-4 w-4 mr-2`}),c(` `+s(_(h)(`diplomacy.actions.gift`)),1)]),_:1}),l(_(L),{size:`sm`,variant:`outline`,class:`flex-1`,onClick:N},{default:r(()=>[l(_(ee),{class:`h-4 w-4 mr-2`}),c(` `+s(_(h)(`diplomacy.actions.viewPlanets`)),1)]),_:1})]),D.value?(t(),b(`div`,Ce,[v(`p`,we,s(_(h)(`diplomacy.lastEvent`))+`:`,1),v(`div`,Te,[(t(),o(e(k(D.value.reason)),{class:`h-3 w-3`})),v(`span`,null,s(A(D.value.reason)),1),v(`span`,Ee,s(_(fe)(Date.now()-D.value.timestamp))+` `+s(_(h)(`diplomacy.ago`)),1)])])):f(``,!0)]),_:1})]),_:1}))}}),De={class:`container mx-auto p-4 sm:p-6 space-y-6`},Oe={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4`},ke={class:`text-2xl sm:text-3xl font-bold`},Ae={class:`text-sm text-muted-foreground mt-1`},je={key:0,class:`text-center py-12 text-muted-foreground`},Me={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Ne={key:1,class:`px-2 text-muted-foreground`},Pe={key:0,class:`text-center py-12 text-muted-foreground`},Fe={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Ie={key:1,class:`px-2 text-muted-foreground`},Le={key:0,class:`text-center py-12 text-muted-foreground`},Re={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},ze={key:1,class:`px-2 text-muted-foreground`},Be={key:0,class:`text-center py-12 text-muted-foreground`},Ve={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},He={key:1,class:`px-2 text-muted-foreground`},Ue={class:`space-y-2 max-h-96 overflow-y-auto`},We={class:`flex-shrink-0 mt-0.5`},Ge={class:`flex-1 min-w-0`},Ke={class:`flex items-center gap-2 mb-1`},qe={class:`font-medium`},Je={class:`text-sm text-muted-foreground`},Ye={class:`text-xs text-muted-foreground mt-1`},$=20,Xe=h({__name:`DiplomacyView`,setup(u){let d=ae(),m=se(),{t:h}=oe(),y=i(`all`),S=()=>{let e=m.npcs;e.length<2||e.forEach(t=>{if(t.allies||=[],t.allies.length===0){let n=e.filter(e=>e.id!==t.id);if(n.length===0)return;let r=Math.min(Math.floor(Math.random()*2)+1,n.length);[...n].sort(()=>Math.random()-.5).slice(0,r).forEach(e=>{t.allies.includes(e.id)||t.allies.push(e.id),e.allies||=[],e.allies.includes(t.id)||e.allies.push(t.id)})}})};x(()=>{S()});let C=i({all:1,friendly:1,neutral:1,hostile:1}),w=e=>d.player.diplomaticRelations?.[e],T=p(()=>m.npcs),E=p(()=>m.npcs.filter(e=>w(e.id)?.status===F.Friendly)),D=p(()=>m.npcs.filter(e=>{let t=w(e.id);return!t||t.status===F.Neutral})),O=p(()=>m.npcs.filter(e=>w(e.id)?.status===F.Hostile)),k=(e,t)=>{let n=((C.value[t]||1)-1)*$,r=n+$;return e.slice(n,r)},A=e=>Math.ceil(e.length/$),j=p(()=>k(T.value,`all`)),ee=p(()=>k(E.value,`friendly`)),N=p(()=>k(D.value,`neutral`)),te=p(()=>k(O.value,`hostile`)),L=p(()=>A(T.value)),z=p(()=>A(E.value)),B=p(()=>A(D.value)),J=p(()=>A(O.value)),Y=(e,t)=>{let n=[];if(t<=5)for(let e=1;e<=t;e++)n.push(e);else{n.push(1),e>3&&n.push(`...`);let r=Math.max(2,e-1),i=Math.min(t-1,e+1);for(let e=r;e<=i;e++)n.push(e);e<t-2&&n.push(`...`),n.push(t)}return n},he=p(()=>Y(C.value.all||1,L.value)),ge=p(()=>Y(C.value.friendly||1,z.value)),_e=p(()=>Y(C.value.neutral||1,B.value)),ve=p(()=>Y(C.value.hostile||1,J.value)),X=p(()=>[...d.player.diplomaticReports||[]].sort((e,t)=>t.timestamp-e.timestamp).slice(0,20)),ye=e=>{switch(e){case I.GiftResources:return P;case I.Attack:case I.AllyAttacked:return re;case I.Spy:return M;case I.StealDebris:return ne;default:return P}},Z=e=>e>0?`text-green-600 dark:text-green-400`:e<0?`text-red-600 dark:text-red-400`:`text-muted-foreground`,be=e=>e>0?`default`:e<0?`destructive`:`secondary`,xe=e=>{switch(e){case F.Friendly:return`default`;case F.Hostile:return`destructive`;default:return`secondary`}},Se=e=>{switch(e){case F.Friendly:return h(`diplomacy.status.friendly`);case F.Hostile:return h(`diplomacy.status.hostile`);default:return h(`diplomacy.status.neutral`)}};return(i,u)=>(t(),b(`div`,De,[v(`div`,Oe,[v(`div`,null,[v(`h1`,ke,s(_(h)(`diplomacy.title`)),1),v(`p`,Ae,s(_(h)(`diplomacy.description`)),1)])]),l(_(pe),{modelValue:y.value,"onUpdate:modelValue":u[4]||=e=>y.value=e,class:`w-full`},{default:r(()=>[l(_(me),{class:`grid w-full grid-cols-4`},{default:r(()=>[l(_(H),{value:`all`},{default:r(()=>[c(s(_(h)(`diplomacy.tabs.all`))+` `,1),l(_(R),{variant:`outline`,class:`ml-2 bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-700`},{default:r(()=>[c(s(T.value.length),1)]),_:1})]),_:1}),l(_(H),{value:`friendly`},{default:r(()=>[c(s(_(h)(`diplomacy.tabs.friendly`))+` `,1),l(_(R),{variant:`outline`,class:`ml-2 bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-300 border-green-300 dark:border-green-700`},{default:r(()=>[c(s(E.value.length),1)]),_:1})]),_:1}),l(_(H),{value:`neutral`},{default:r(()=>[c(s(_(h)(`diplomacy.tabs.neutral`))+` `,1),l(_(R),{variant:`outline`,class:`ml-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600`},{default:r(()=>[c(s(D.value.length),1)]),_:1})]),_:1}),l(_(H),{value:`hostile`},{default:r(()=>[c(s(_(h)(`diplomacy.tabs.hostile`))+` `,1),l(_(R),{variant:`outline`,class:`ml-2 bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700`},{default:r(()=>[c(s(O.value.length),1)]),_:1})]),_:1})]),_:1}),l(_(V),{value:`all`,class:`space-y-4 mt-6`},{default:r(()=>[T.value.length===0?(t(),b(`div`,je,s(_(h)(`diplomacy.noNpcs`)),1)):(t(),b(g,{key:1},[v(`div`,Me,[(t(!0),b(g,null,n(j.value,e=>(t(),o(Q,{key:e.id,npc:e,relation:w(e.id)},null,8,[`npc`,`relation`]))),128))]),L.value>1?(t(),o(_(U),{key:0,page:C.value.all,"onUpdate:page":u[0]||=e=>C.value.all=e,total:T.value.length,"items-per-page":$,"sibling-count":1,"show-edges":``,class:`mt-6`},{default:r(()=>[l(_(W),null,{default:r(()=>[l(_(q),null,{default:r(()=>[c(s(_(h)(`pagination.previous`)),1)]),_:1}),(t(!0),b(g,null,n(he.value,(e,n)=>(t(),b(g,{key:n},[typeof e==`number`?(t(),o(_(G),{key:0,value:e,"is-active":e===C.value.all},{default:r(()=>[c(s(e),1)]),_:2},1032,[`value`,`is-active`])):(t(),b(`span`,Ne,s(e),1))],64))),128)),l(_(K),null,{default:r(()=>[c(s(_(h)(`pagination.next`)),1)]),_:1})]),_:1})]),_:1},8,[`page`,`total`])):f(``,!0)],64))]),_:1}),l(_(V),{value:`friendly`,class:`space-y-4 mt-6`},{default:r(()=>[E.value.length===0?(t(),b(`div`,Pe,s(_(h)(`diplomacy.noFriendlyNpcs`)),1)):(t(),b(g,{key:1},[v(`div`,Fe,[(t(!0),b(g,null,n(ee.value,e=>(t(),o(Q,{key:e.id,npc:e,relation:w(e.id)},null,8,[`npc`,`relation`]))),128))]),z.value>1?(t(),o(_(U),{key:0,page:C.value.friendly,"onUpdate:page":u[1]||=e=>C.value.friendly=e,total:E.value.length,"items-per-page":$,"sibling-count":1,"show-edges":``,class:`mt-6`},{default:r(()=>[l(_(W),null,{default:r(()=>[l(_(q),null,{default:r(()=>[c(s(_(h)(`pagination.previous`)),1)]),_:1}),(t(!0),b(g,null,n(ge.value,(e,n)=>(t(),b(g,{key:n},[typeof e==`number`?(t(),o(_(G),{key:0,value:e,"is-active":e===C.value.friendly},{default:r(()=>[c(s(e),1)]),_:2},1032,[`value`,`is-active`])):(t(),b(`span`,Ie,s(e),1))],64))),128)),l(_(K),null,{default:r(()=>[c(s(_(h)(`pagination.next`)),1)]),_:1})]),_:1})]),_:1},8,[`page`,`total`])):f(``,!0)],64))]),_:1}),l(_(V),{value:`neutral`,class:`space-y-4 mt-6`},{default:r(()=>[D.value.length===0?(t(),b(`div`,Le,s(_(h)(`diplomacy.noNeutralNpcs`)),1)):(t(),b(g,{key:1},[v(`div`,Re,[(t(!0),b(g,null,n(N.value,e=>(t(),o(Q,{key:e.id,npc:e,relation:w(e.id)},null,8,[`npc`,`relation`]))),128))]),B.value>1?(t(),o(_(U),{key:0,page:C.value.neutral,"onUpdate:page":u[2]||=e=>C.value.neutral=e,total:D.value.length,"items-per-page":$,"sibling-count":1,"show-edges":``,class:`mt-6`},{default:r(()=>[l(_(W),null,{default:r(()=>[l(_(q),null,{default:r(()=>[c(s(_(h)(`pagination.previous`)),1)]),_:1}),(t(!0),b(g,null,n(_e.value,(e,n)=>(t(),b(g,{key:n},[typeof e==`number`?(t(),o(_(G),{key:0,value:e,"is-active":e===C.value.neutral},{default:r(()=>[c(s(e),1)]),_:2},1032,[`value`,`is-active`])):(t(),b(`span`,ze,s(e),1))],64))),128)),l(_(K),null,{default:r(()=>[c(s(_(h)(`pagination.next`)),1)]),_:1})]),_:1})]),_:1},8,[`page`,`total`])):f(``,!0)],64))]),_:1}),l(_(V),{value:`hostile`,class:`space-y-4 mt-6`},{default:r(()=>[O.value.length===0?(t(),b(`div`,Be,s(_(h)(`diplomacy.noHostileNpcs`)),1)):(t(),b(g,{key:1},[v(`div`,Ve,[(t(!0),b(g,null,n(te.value,e=>(t(),o(Q,{key:e.id,npc:e,relation:w(e.id)},null,8,[`npc`,`relation`]))),128))]),J.value>1?(t(),o(_(U),{key:0,page:C.value.hostile,"onUpdate:page":u[3]||=e=>C.value.hostile=e,total:O.value.length,"items-per-page":$,"sibling-count":1,"show-edges":``,class:`mt-6`},{default:r(()=>[l(_(W),null,{default:r(()=>[l(_(q),null,{default:r(()=>[c(s(_(h)(`pagination.previous`)),1)]),_:1}),(t(!0),b(g,null,n(ve.value,(e,n)=>(t(),b(g,{key:n},[typeof e==`number`?(t(),o(_(G),{key:0,value:e,"is-active":e===C.value.hostile},{default:r(()=>[c(s(e),1)]),_:2},1032,[`value`,`is-active`])):(t(),b(`span`,He,s(e),1))],64))),128)),l(_(K),null,{default:r(()=>[c(s(_(h)(`pagination.next`)),1)]),_:1})]),_:1})]),_:1},8,[`page`,`total`])):f(``,!0)],64))]),_:1})]),_:1},8,[`modelValue`]),X.value.length>0?(t(),o(_(ue),{key:0},{default:r(()=>[l(_(le),null,{default:r(()=>[l(_(ce),null,{default:r(()=>[c(s(_(h)(`diplomacy.recentEvents`)),1)]),_:1}),l(_(ie),null,{default:r(()=>[c(s(_(h)(`diplomacy.recentEventsDescription`)),1)]),_:1})]),_:1}),l(_(de),null,{default:r(()=>[v(`div`,Ue,[(t(!0),b(g,null,n(X.value,n=>(t(),b(`div`,{key:n.id,class:`flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors`},[v(`div`,We,[(t(),o(e(ye(n.eventType)),{class:a([`h-5 w-5`,Z(n.reputationChange)])},null,8,[`class`]))]),v(`div`,Ge,[v(`div`,Ke,[v(`span`,qe,s(n.npcName),1),l(_(R),{variant:be(n.reputationChange),class:`text-xs`},{default:r(()=>[c(s(n.reputationChange>0?`+`:``)+s(n.reputationChange),1)]),_:2},1032,[`variant`]),l(_(R),{variant:xe(n.newStatus),class:`text-xs`},{default:r(()=>[c(s(Se(n.newStatus)),1)]),_:2},1032,[`variant`])]),v(`p`,Je,s(n.message),1),v(`p`,Ye,s(_(fe)(Date.now()-n.timestamp))+` `+s(_(h)(`diplomacy.ago`)),1)])]))),128))])]),_:1})]),_:1})):f(``,!0)]))}});export{Xe as default};